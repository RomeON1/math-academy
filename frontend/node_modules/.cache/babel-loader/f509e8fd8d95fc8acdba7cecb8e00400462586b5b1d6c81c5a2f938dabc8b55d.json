{"ast":null,"code":"import axios from 'axios';\nconst getAPIBaseURL = () => {\n  return 'http://localhost:4000/api'; // 🟢 Прямое подключение к бекенду\n};\nconst API_BASE_URL = getAPIBaseURL();\nconst getToken = () => {\n  return localStorage.getItem('authToken');\n};\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  withCredentials: false\n});\napi.interceptors.request.use(config => {\n  var _config$method;\n  const token = getToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  config.headers['Content-Type'] = 'application/json';\n  config.headers['Accept'] = 'application/json';\n  console.log(`🚀 API Request: ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.url}`);\n  return config;\n}, error => {\n  console.error('❌ Request Interceptor Error:', error);\n  return Promise.reject(error);\n});\napi.interceptors.response.use(response => {\n  console.log(`✅ API Success: ${response.status} ${response.config.url}`);\n  return response;\n}, error => {\n  console.error('❌ API Error Details:', error);\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  register: userData => api.post('/auth/register', userData),\n  login: credentials => api.post('/auth/login', credentials),\n  getMe: () => api.get('/auth/me')\n};\nexport const courseAPI = {\n  getStructure: () => api.get('/course/structure'),\n  generateTasks: dayNumber => api.get(`/course/day/${dayNumber}/tasks`),\n  getProgress: () => api.get('/course/progress'),\n  updateProgress: (day, answers, completed) => api.post(`/course/progress/${day}`, {\n    completed_tasks: completed\n  }),\n  resetProgress: () => api.post('/course/reset-progress')\n};\nexport const userAPI = {\n  getAllTasks: () => api.get('/users/tasks'),\n  getTasks: day => api.get(`/users/tasks/${day}`),\n  saveTasks: (day, tasks) => api.post(`/users/tasks/${day}`, tasks),\n  getAnswers: () => api.get('/users/answers'),\n  saveAnswer: (day, taskIndex, answer, isCorrect = false) => api.post(`/users/answers/${day}/${taskIndex}`, {\n    answer,\n    is_correct: isCorrect\n  })\n};\nexport default api;","map":{"version":3,"names":["axios","getAPIBaseURL","API_BASE_URL","getToken","localStorage","getItem","api","create","baseURL","timeout","withCredentials","interceptors","request","use","config","_config$method","token","headers","Authorization","console","log","method","toUpperCase","url","error","Promise","reject","response","status","authAPI","register","userData","post","login","credentials","getMe","get","courseAPI","getStructure","generateTasks","dayNumber","getProgress","updateProgress","day","answers","completed","completed_tasks","resetProgress","userAPI","getAllTasks","getTasks","saveTasks","tasks","getAnswers","saveAnswer","taskIndex","answer","isCorrect","is_correct"],"sources":["/opt/math-app/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst getAPIBaseURL = () => {\n  return 'http://localhost:4000/api';  // 🟢 Прямое подключение к бекенду\n};\n\nconst API_BASE_URL = getAPIBaseURL();\n\nconst getToken = () => {\n  return localStorage.getItem('authToken');\n};\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  withCredentials: false,\n});\n\napi.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    config.headers['Content-Type'] = 'application/json';\n    config.headers['Accept'] = 'application/json';\n    console.log(`🚀 API Request: ${config.method?.toUpperCase()} ${config.url}`);\n    return config;\n  },\n  (error) => {\n    console.error('❌ Request Interceptor Error:', error);\n    return Promise.reject(error);\n  }\n);\n\napi.interceptors.response.use(\n  (response) => {\n    console.log(`✅ API Success: ${response.status} ${response.config.url}`);\n    return response;\n  },\n  (error) => {\n    console.error('❌ API Error Details:', error);\n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  register: (userData) => api.post('/auth/register', userData),\n  login: (credentials) => api.post('/auth/login', credentials),\n  getMe: () => api.get('/auth/me'),\n};\n\nexport const courseAPI = {\n  getStructure: () => api.get('/course/structure'),\n  generateTasks: (dayNumber) => api.get(`/course/day/${dayNumber}/tasks`),\n  getProgress: () => api.get('/course/progress'),\n  updateProgress: (day, answers, completed) => \n    api.post(`/course/progress/${day}`, { completed_tasks: completed }),\n  resetProgress: () => api.post('/course/reset-progress'),\n};\n\nexport const userAPI = {\n  getAllTasks: () => api.get('/users/tasks'),\n  getTasks: (day) => api.get(`/users/tasks/${day}`),\n  saveTasks: (day, tasks) => api.post(`/users/tasks/${day}`, tasks),\n  getAnswers: () => api.get('/users/answers'),\n  saveAnswer: (day, taskIndex, answer, isCorrect = false) => \n    api.post(`/users/answers/${day}/${taskIndex}`, { \n      answer, \n      is_correct: isCorrect \n    }),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}