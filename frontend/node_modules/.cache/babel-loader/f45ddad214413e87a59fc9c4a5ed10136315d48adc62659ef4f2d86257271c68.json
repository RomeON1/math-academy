{"ast":null,"code":"import _objectSpread from\"/opt/math-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useCallback}from\"react\";import Header from\"./components/Header\";import Login from\"./components/auth/Login\";import Register from\"./components/auth/Register\";import{authAPI,courseAPI,userAPI}from'./services/api';import{courseStructure}from'./taskGenerators';import*as taskGenerators from'./taskGenerators';import{useTranslation}from'react-i18next';import DayNavigation from'./components/DayNavigation';// ðŸŸ¢ ÐŸÐ ÐžÐ¡Ð¢ÐžÐ™ Ð˜ ÐÐÐ”Ð•Ð–ÐÐ«Ð™ Ð”Ð•Ð¢Ð•ÐšÐ¢ÐžÐ  Ð¡Ð‘Ð ÐžÐ¡Ð ÐšÐ­Ð¨Ð\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const detectCacheClear=()=>{// ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð² sessionStorage\nreturn sessionStorage.getItem('cacheWasCleared')==='true';};// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¾Ð² Ðº Ð·Ð°Ð´Ð°Ð½Ð¸ÑÐ¼\nconst applyTranslationsToTasks=(tasks,t)=>{if(!tasks||!Array.isArray(tasks))return[];return tasks.map(task=>_objectSpread(_objectSpread({},task),{},{question:task.translationKey?t(task.translationKey,task.translationParams):task.question,explanation:task.explanationKey?t(task.explanationKey,task.explanationParams):task.explanation,answerFormat:task.formatKey?t(task.formatKey):task.answerFormat}));};// ðŸŸ¢ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜ ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐžÐ¡Ð¢Ð˜ ÐžÐ¢Ð’Ð•Ð¢Ð\nconst isCorrectAnswerCheck=(day,index,correctAnswer,currentAnswers)=>{var _currentAnswers;if(!currentAnswers)return false;const userAnswer=(_currentAnswers=currentAnswers[\"\".concat(day,\"-\").concat(index)])===null||_currentAnswers===void 0?void 0:_currentAnswers.toString().trim().toLowerCase();const correct=correctAnswer===null||correctAnswer===void 0?void 0:correctAnswer.toString().toLowerCase();if(!userAnswer||!correct)return false;if(correct.includes('%')){const userNum=userAnswer.replace('%','');const correctNum=correct.replace('%','');return userNum===correctNum;}if(correct.includes('/')){const[userA,userB]=userAnswer.split('/');const[correctA,correctB]=correct.split('/');return userA===correctA&&userB===correctB;}return userAnswer===correct;};function App(){const{t,i18n}=useTranslation();const[tests,setTests]=useState([]);const[answers,setAnswers]=useState({});const[loading,setLoading]=useState(true);const[showResetConfirm,setShowResetConfirm]=useState(false);const[user,setUser]=useState(null);const[showLogin,setShowLogin]=useState(false);const[showRegister,setShowRegister]=useState(false);const[currentDay,setCurrentDay]=useState(1);const[showScrollTop,setShowScrollTop]=useState(false);const[authError,setAuthError]=useState('');const[dataLoaded,setDataLoaded]=useState(false);const[recoveryAttempted,setRecoveryAttempted]=useState(false);// ðŸŸ¢ EFFECT Ð”Ð›Ð¯ ÐžÐ¢Ð¡Ð›Ð•Ð–Ð˜Ð’ÐÐÐ˜Ð¯ Ð¡ÐšÐ ÐžÐ›Ð›Ð\nuseEffect(()=>{const handleScroll=()=>{setShowScrollTop(window.scrollY>300);};window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[]);// ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐÐ¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐÐ£Ð¢Ð•ÐÐ¢Ð˜Ð¤Ð˜ÐšÐÐ¦Ð˜Ð˜\nconst checkAuth=useCallback(async()=>{try{const token=localStorage.getItem('authToken');if(!token){setUser({name:t('header.guest',\"Ð“Ð¾ÑÑ‚ÑŒ\"),isLoggedIn:false});setLoading(false);return;}// ÐŸÑ€Ð¾Ð±ÑƒÐµÐ¼ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\ntry{const response=await authAPI.getMe();const userData=_objectSpread(_objectSpread({},response.data),{},{isLoggedIn:true});setUser(userData);localStorage.setItem('userData',JSON.stringify(userData));}catch(error){console.log('getMe failed, checking localStorage for user data');// ÐŸÑ€Ð¾Ð±ÑƒÐµÐ¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· localStorage\nconst savedUser=localStorage.getItem('userData');if(savedUser){const userData=JSON.parse(savedUser);setUser(_objectSpread(_objectSpread({},userData),{},{isLoggedIn:true}));}else{// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\nconst tempUser={id:Date.now(),name:'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ',email:'user@example.com',isLoggedIn:true};setUser(tempUser);localStorage.setItem('userData',JSON.stringify(tempUser));}}}catch(error){console.error('Auth check error:',error);setUser({name:t('header.guest',\"Ð“Ð¾ÑÑ‚ÑŒ\"),isLoggedIn:false});}finally{setLoading(false);}},[t]);// ðŸŸ¢ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ ÐŸÐ Ð˜ Ð¡Ð¢ÐÐ Ð¢Ð•\nuseEffect(()=>{checkAuth();},[checkAuth]);// ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐÐ¯ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ Ð”ÐÐÐÐ«Ð¥\nconst loadUserData=useCallback(async()=>{if(dataLoaded)return;try{// 1. Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¸Ð· localStorage (Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾)\nconst savedTests=localStorage.getItem('userMathTests');const savedAnswers=localStorage.getItem('userMathAnswers');let finalTests=[];let finalAnswers={};if(savedTests&&savedAnswers){try{const parsedTests=JSON.parse(savedTests);const parsedAnswers=JSON.parse(savedAnswers);finalTests=parsedTests.map(dayData=>_objectSpread(_objectSpread({},dayData),{},{tasks:applyTranslationsToTasks(dayData.tasks,t)}));finalAnswers=parsedAnswers;}catch(parseError){console.error('Error parsing localStorage data:',parseError);// Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\nthrow new Error('Invalid localStorage data');}}else{// 2. Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ\nfinalTests=courseStructure.map(day=>({day:day.day,titleKey:day.titleKey,theoryLink:day.theoryLink,tasks:taskGenerators[day.generator]?taskGenerators[day.generator](day.taskCount,t):[]})).filter(day=>day.tasks.length>0);finalAnswers={};}// 3. Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ\nsetTests(finalTests);setAnswers(finalAnswers);// 4. Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage\nlocalStorage.setItem('userMathTests',JSON.stringify(finalTests));localStorage.setItem('userMathAnswers',JSON.stringify(finalAnswers));setDataLoaded(true);// 5. Ð¤ÐžÐÐ¾Ð²Ð°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹\nif(user&&user.isLoggedIn){setTimeout(async()=>{try{console.log('ðŸ”„ Starting background sync with server...');// Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”\nconst serverAnswers=await userAPI.getAnswers().catch(()=>({data:{}}));// Ð•ÑÐ»Ð¸ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ ÐµÑÑ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ…\nif(serverAnswers.data&&Object.keys(serverAnswers.data).length>0){console.log('âœ… Answers loaded from DB:',Object.keys(serverAnswers.data).length);setAnswers(serverAnswers.data);localStorage.setItem('userMathAnswers',JSON.stringify(serverAnswers.data));}// Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€\nconsole.log('â„¹ï¸ Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾');console.log('âœ… Background sync completed');}catch(syncError){console.log('Background sync failed, continuing with local data');}},2000);}}catch(error){console.error('Error loading user data:',error);// ÐÐ’ÐÐ Ð˜Ð™ÐÐ«Ð™ Ð Ð•Ð–Ð˜Ðœ: Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ\nconst emergencyTests=courseStructure.map(day=>({day:day.day,titleKey:day.titleKey,theoryLink:day.theoryLink,tasks:taskGenerators[day.generator]?taskGenerators[day.generator](day.taskCount,t):[]})).filter(day=>day.tasks.length>0);setTests(emergencyTests);setAnswers({});localStorage.setItem('userMathTests',JSON.stringify(emergencyTests));localStorage.setItem('userMathAnswers',JSON.stringify({}));setDataLoaded(true);}},[user,t,dataLoaded]);// ðŸŸ¢ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ Ð”ÐÐÐÐ«Ð¥ ÐŸÐ Ð˜ Ð˜Ð—ÐœÐ•ÐÐ•ÐÐ˜Ð˜ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯ Ð˜Ð›Ð˜ Ð¯Ð—Ð«ÐšÐ\nuseEffect(()=>{if(!loading&&user!==null){loadUserData();}},[user,loading,loadUserData]);useEffect(()=>{if(dataLoaded&&tests.length>0){// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹ Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ ÑÐ·Ñ‹ÐºÐ°\nconst updatedTests=tests.map(dayData=>_objectSpread(_objectSpread({},dayData),{},{tasks:applyTranslationsToTasks(dayData.tasks,t)}));setTests(updatedTests);}},[i18n.language,t]);// ðŸŸ¢ Ð£Ð›Ð£Ð§Ð¨Ð•ÐÐÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯ Ð˜Ð— Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥\nconst recoverFromDatabase=async()=>{if(recoveryAttempted)return;// ÐÐµ Ð¿Ñ‹Ñ‚Ð°Ñ‚ÑŒÑÑ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾\nconst hasAuthToken=localStorage.getItem('authToken');const hasLocalTests=localStorage.getItem('userMathTests');const hasLocalAnswers=localStorage.getItem('userMathAnswers');console.log('ðŸ” Ð¡Ð¢ÐÐ¢Ð£Ð¡ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯:',{hasAuthToken:!!hasAuthToken,hasLocalTests:!!hasLocalTests,hasLocalAnswers:!!hasLocalAnswers,recoveryAttempted});// ðŸŸ¢ Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð•: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ð±Ñ‹Ð» Ð»Ð¸ ÑÐ±Ñ€Ð¾Ñ ÐºÑÑˆÐ°\nconst wasCacheCleared=detectCacheClear();// ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð™ Ð¡Ð›Ð£Ð§ÐÐ™: Ð•ÑÑ‚ÑŒ Ñ‚Ð¾ÐºÐµÐ½, Ð½Ð¾ Ð±Ñ‹Ð» ÑÐ±Ñ€Ð¾Ñ ÐºÑÑˆÐ° Ð˜Ð›Ð˜ Ð½ÐµÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…\nif(hasAuthToken&&(wasCacheCleared||!hasLocalTests||!hasLocalAnswers)){console.log('ðŸš¨ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð˜Ð— Ð‘Ð”: Ð¢Ð¾ÐºÐµÐ½ ÐµÑÑ‚ÑŒ + ÑÐ±Ñ€Ð¾Ñ ÐºÑÑˆÐ°!');setRecoveryAttempted(true);// Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ ÑÐ±Ñ€Ð¾ÑÐ° ÐºÑÑˆÐ°\nif(wasCacheCleared){sessionStorage.removeItem('cacheWasCleared');}try{// 1. Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð’Ð¡Ð• ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”\nconsole.log('ðŸ“š Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”...');const tasksResponse=await userAPI.getAllTasks();const dbTasks=tasksResponse.data||{};console.log('âœ… Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”:',Object.keys(dbTasks).length,'Ð´Ð½ÐµÐ¹');// 2. Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð’Ð¡Ð• Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”\nconsole.log('ðŸ“¥ Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”...');const answersResponse=await userAPI.getAnswers();const dbAnswers=answersResponse.data||{};console.log('âœ… ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”:',Object.keys(dbAnswers).length,'Ð·Ð°Ð¿Ð¸ÑÐµÐ¹');// 3. Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ…\nlet restoredTests=[];if(Object.keys(dbTasks).length>0){console.log('ðŸŽ¯ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐÐ’Ð›Ð˜Ð’ÐÐ•Ðœ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”');// ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð” Ð² ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ\nrestoredTests=Object.keys(dbTasks).map(dayStr=>{const day=parseInt(dayStr);const dayTasks=dbTasks[dayStr];// ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð´Ð½Ðµ Ð¸Ð· courseStructure\nconst dayInfo=courseStructure.find(d=>d.day===day)||{titleKey:\"days.day\".concat(day),theoryLink:null};return{day:day,titleKey:dayInfo.titleKey,theoryLink:dayInfo.theoryLink,tasks:dayTasks.map(task=>_objectSpread({question:task.question,answer:task.answer,explanation:task.explanation,answerFormat:task.answerFormat},task.task_data&&typeof task.task_data==='object'?task.task_data:{}))};}).filter(day=>day.tasks.length>0);console.log(\"\\u2705 \\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E \".concat(restoredTests.length,\" \\u0434\\u043D\\u0435\\u0439 \\u0441 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u044F\\u043C\\u0438 \\u0438\\u0437 \\u0411\\u0414\"));}else{// 4. Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ\nconsole.log('ðŸ†• Ð¡ÐžÐ¥Ð ÐÐÐ•ÐÐÐ«Ð¥ Ð—ÐÐ”ÐÐÐ˜Ð™ ÐÐ•Ð¢ - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ');restoredTests=courseStructure.map(day=>({day:day.day,titleKey:day.titleKey,theoryLink:day.theoryLink,tasks:taskGenerators[day.generator]?taskGenerators[day.generator](day.taskCount,t):[]})).filter(day=>day.tasks.length>0);console.log(\"\\u2705 \\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\\u043E \".concat(restoredTests.length,\" \\u0434\\u043D\\u0435\\u0439 \\u0441 \\u043D\\u043E\\u0432\\u044B\\u043C\\u0438 \\u0437\\u0430\\u0434\\u0430\\u043D\\u0438\\u044F\\u043C\\u0438\"));}// 5. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð½ÐµÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ (Ñ‚Ðµ, Ð´Ð»Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð½ÐµÑ‚ Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹)\nconst compatibleAnswers={};Object.keys(dbAnswers).forEach(key=>{const[day,index]=key.split('-').map(Number);const dayData=restoredTests.find(d=>d.day===day);if(dayData&&dayData.tasks&&dayData.tasks[index]){compatibleAnswers[key]=dbAnswers[key];}else{console.log(\"\\uD83D\\uDDD1\\uFE0F \\u0423\\u0434\\u0430\\u043B\\u044F\\u0435\\u043C \\u043D\\u0435\\u0441\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u0438\\u043C\\u044B\\u0439 \\u043E\\u0442\\u0432\\u0435\\u0442: \".concat(key));}});console.log(\"\\u2705 \\u0421\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u0438\\u043C\\u044B\\u0445 \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432: \".concat(Object.keys(compatibleAnswers).length));// 6. Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\nsetTests(restoredTests);setAnswers(compatibleAnswers);localStorage.setItem('userMathTests',JSON.stringify(restoredTests));localStorage.setItem('userMathAnswers',JSON.stringify(compatibleAnswers));console.log('ðŸŽ‰ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð˜Ð— Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥ Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐž!');}catch(error){var _error$response;console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸Ð· Ð‘Ð”:',error);console.log('ðŸ” Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);// ÐÐ’ÐÐ Ð˜Ð™ÐÐ«Ð™ Ð Ð•Ð–Ð˜Ðœ: ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\nconsole.log('ðŸ†˜ Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð°Ð²Ð°Ñ€Ð¸Ð¹Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ...');const emergencyTests=courseStructure.map(day=>({day:day.day,titleKey:day.titleKey,theoryLink:day.theoryLink,tasks:taskGenerators[day.generator]?taskGenerators[day.generator](day.taskCount,t):[]})).filter(day=>day.tasks.length>0);setTests(emergencyTests);setAnswers({});localStorage.setItem('userMathTests',JSON.stringify(emergencyTests));localStorage.setItem('userMathAnswers',JSON.stringify({}));}}};// ðŸŸ¢ Ð¤Ð˜ÐÐÐ›Ð¬ÐÐžÐ• Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð˜Ð— Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥ ÐŸÐžÐ¡Ð›Ð• Ð¡Ð‘Ð ÐžÐ¡Ð ÐšÐ­Ð¨Ð\nuseEffect(()=>{// Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ€Ð°Ð·Ñƒ Ð¸ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 3 ÑÐµÐºÑƒÐ½Ð´Ñ‹ (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº)\nrecoverFromDatabase();const interval=setInterval(()=>{if(!recoveryAttempted){recoverFromDatabase();}},3000);return()=>clearInterval(interval);},[t,recoveryAttempted]);// ðŸŸ¢ Ð”ÐžÐ‘ÐÐ’Ð˜Ðœ ÐšÐÐžÐŸÐšÐ£ Ð”Ð›Ð¯ Ð Ð£Ð§ÐÐžÐ“Ðž Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯ (Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\nconst manualRecovery=()=>{console.log('ðŸ”„ Ð Ð£Ð§ÐÐžÐ™ Ð—ÐÐŸÐ£Ð¡Ðš Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯');sessionStorage.setItem('cacheWasCleared','true');setRecoveryAttempted(false);recoverFromDatabase();};// ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐ«Ð™ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜Ðš Ð’Ð¥ÐžÐ”Ð\nconst handleLogin=async formData=>{setAuthError('');try{var _response$data;console.log('ðŸ” Attempting login...');const response=await authAPI.login({email:formData.email,password:formData.password});if(!((_response$data=response.data)!==null&&_response$data!==void 0&&_response$data.access_token)){throw new Error('No access token received');}localStorage.setItem('authToken',response.data.access_token);console.log('âœ… Login successful, token saved');// Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ñ€Ð¼Ñƒ Ð²Ñ…Ð¾Ð´Ð°\nsetShowLogin(false);// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ\nawait checkAuth();}catch(error){var _error$response2,_error$response2$data;console.error('âŒ Login error:',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message||'ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°';setAuthError(errorMessage);// ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð½ÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½\nlocalStorage.removeItem('authToken');}};// ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐ«Ð™ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜Ðš Ð Ð•Ð“Ð˜Ð¡Ð¢Ð ÐÐ¦Ð˜Ð˜\nconst handleRegister=async formData=>{setAuthError('');try{var _loginResponse$data;console.log('ðŸ“ Attempting registration...');await authAPI.register({email:formData.email,username:formData.username,password:formData.password,grade:formData.grade});console.log('âœ… Registration successful, attempting login...');const loginResponse=await authAPI.login({email:formData.email,password:formData.password});if(!((_loginResponse$data=loginResponse.data)!==null&&_loginResponse$data!==void 0&&_loginResponse$data.access_token)){throw new Error('No access token received after registration');}localStorage.setItem('authToken',loginResponse.data.access_token);console.log('âœ… Auto-login successful');// Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ñ€Ð¼Ñƒ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸\nsetShowRegister(false);// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ\nawait checkAuth();}catch(error){var _error$response3,_error$response3$data;console.error('âŒ Registration error:',error);const errorMessage=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||error.message||'ÐžÑˆÐ¸Ð±ÐºÐ° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸';setAuthError(errorMessage);// ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð½ÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½\nlocalStorage.removeItem('authToken');}};// ðŸŸ¢ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜Ðš Ð’Ð«Ð¥ÐžÐ”Ð\nconst handleLogout=()=>{console.log('ðŸšª Logging out...');localStorage.removeItem('authToken');localStorage.removeItem('userData');setUser({name:t('header.guest',\"Ð“Ð¾ÑÑ‚ÑŒ\"),isLoggedIn:false});setAuthError('');// ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ð¾ÑÑ‚Ð°ÐµÑ‚ÑÑ Ð² localStorage Ð´Ð»Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ\n};// ðŸŸ¢ ÐžÐŸÐ¢Ð˜ÐœÐ˜Ð—Ð˜Ð ÐžÐ’ÐÐÐÐÐ¯ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢ÐšÐ Ð’Ð’ÐžÐ”Ð ÐžÐ¢Ð’Ð•Ð¢Ð\nconst handleAnswerChange=async(day,index,value)=>{const answerKey=\"\".concat(day,\"-\").concat(index);const newAnswers=_objectSpread(_objectSpread({},answers),{},{[answerKey]:value});// ÐÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ UI\nsetAnswers(newAnswers);localStorage.setItem('userMathAnswers',JSON.stringify(newAnswers));// Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼\nif(user&&user.isLoggedIn){setTimeout(async()=>{try{const dayData=tests.find(d=>d.day===day);if(dayData&&dayData.tasks[index]){const task=dayData.tasks[index];const isCorrectAnswer=isCorrectAnswerCheck(day,index,task.answer,newAnswers);await userAPI.saveAnswer(day,index,value,isCorrectAnswer);const completedTasks=dayData.tasks.filter((t,i)=>isCorrectAnswerCheck(day,i,t.answer,newAnswers)).length;await courseAPI.updateProgress(day,newAnswers,completedTasks);}}catch(error){console.log('Background answer sync failed');}},500);}};// ðŸŸ¢ Ð’Ð«Ð§Ð˜Ð¡Ð›Ð•ÐÐ˜Ð• ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡Ð\nconst getDayProgress=(day,tasks)=>{if(!tasks||!Array.isArray(tasks))return 0;const correctCount=tasks.filter((task,index)=>isCorrectAnswerCheck(day,index,task.answer,answers)).length;return tasks.length>0?Math.round(correctCount/tasks.length*100):0;};const getTotalProgress=()=>{let totalCorrect=0;let totalTasks=0;tests.forEach(dayData=>{if(dayData.tasks&&Array.isArray(dayData.tasks)){dayData.tasks.forEach((task,index)=>{totalTasks++;if(isCorrectAnswerCheck(dayData.day,index,task.answer,answers)){totalCorrect++;}});}});return totalTasks>0?Math.round(totalCorrect/totalTasks*100):0;};// ðŸŸ¢ Ð¡Ð‘Ð ÐžÐ¡ ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡Ð\nconst resetProgress=async()=>{try{const userTests=courseStructure.map(day=>({day:day.day,titleKey:day.titleKey,theoryLink:day.theoryLink,tasks:taskGenerators[day.generator]?taskGenerators[day.generator](day.taskCount,t):[]})).filter(day=>day.tasks.length>0);setTests(userTests);setAnswers({});localStorage.setItem('userMathTests',JSON.stringify(userTests));localStorage.setItem('userMathAnswers',JSON.stringify({}));// Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼\nif(user&&user.isLoggedIn){setTimeout(async()=>{try{await courseAPI.resetProgress();for(const dayData of userTests){await userAPI.saveTasks(dayData.day,dayData.tasks);}}catch(error){console.log('Background reset sync failed');}},500);}}catch(error){console.error('Error resetting progress:',error);}};// ðŸŸ¢ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜ÐšÐ˜ UI\nconst handleLoginClick=()=>{setShowLogin(true);setAuthError('');};const handleRegisterClick=()=>{setShowRegister(true);setAuthError('');};const handleDayClick=dayNumber=>{setCurrentDay(dayNumber);const element=document.getElementById(\"day-\".concat(dayNumber));if(element){const headerOffset=340;const elementPosition=element.offsetTop;const offsetPosition=elementPosition-headerOffset;setTimeout(()=>{window.scrollTo({top:Math.max(0,offsetPosition),behavior:'smooth'});},50);}};// ðŸŸ¢ Ð—ÐÐ“Ð Ð£Ð—ÐžÐ§ÐÐ«Ð™ Ð­ÐšÐ ÐÐ\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600 dark:text-gray-400\",children:t('loading',\"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...\")})]})});}// ðŸŸ¢ ÐžÐ¡ÐÐžÐ’ÐÐžÐ™ RENDER\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(Header,{user:user||{name:t('header.guest',\"Ð“Ð¾ÑÑ‚ÑŒ\"),isLoggedIn:false},progress:getTotalProgress(),onResetClick:()=>setShowResetConfirm(true),onSettingsClick:()=>console.log(\"Settings clicked\"),onLoginClick:handleLoginClick,onLogoutClick:handleLogout,grade:\"6\"}),process.env.NODE_ENV==='development'&&user&&user.isLoggedIn&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-20 right-4 z-40\",children:/*#__PURE__*/_jsx(\"button\",{onClick:manualRecovery,className:\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium\",title:\"\\u0422\\u0435\\u0441\\u0442 \\u0432\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u0438\\u0437 \\u0411\\u0414\",children:\"\\uD83D\\uDD04 \\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"})}),showLogin&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin,onSwitchToRegister:()=>{setShowLogin(false);setShowRegister(true);setAuthError('');},error:authError})}),showRegister&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(Register,{onRegister:handleRegister,onSwitchToLogin:()=>{setShowRegister(false);setShowLogin(true);setAuthError('');},error:authError})}),user&&user.isLoggedIn&&tests.length>0&&/*#__PURE__*/_jsx(DayNavigation,{days:tests.map(day=>_objectSpread(_objectSpread({},day),{},{progress:getDayProgress(day.day,day.tasks)})),currentDay:currentDay,onDayClick:handleDayClick}),user&&user.isLoggedIn?/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-14 max-w-4xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-16\",children:tests.map(dayData=>{var _dayData$tasks,_dayData$tasks2;const dayProgress=getDayProgress(dayData.day,dayData.tasks);return/*#__PURE__*/_jsxs(\"div\",{id:\"day-\".concat(dayData.day),className:\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-1\",children:[t('days.day',\"Ð”ÐµÐ½ÑŒ\"),\" \",dayData.day]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-800 dark:text-gray-200 font-medium\",children:t(dayData.titleKey)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end space-y-1 flex-shrink-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold text-gray-600 dark:text-gray-400\",children:[dayProgress,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(dayProgress,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[((_dayData$tasks=dayData.tasks)===null||_dayData$tasks===void 0?void 0:_dayData$tasks.length)||0,\" \",t('days.tasks',\"Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹\")]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:(_dayData$tasks2=dayData.tasks)===null||_dayData$tasks2===void 0?void 0:_dayData$tasks2.map((task,index)=>{const isAnswerCorrect=isCorrectAnswerCheck(dayData.day,index,task.answer,answers);const hasAnswer=answers[\"\".concat(dayData.day,\"-\").concat(index)];return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg \".concat(hasAnswer?isAnswerCorrect?'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800':'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800':'bg-gray-50 dark:bg-gray-700'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex-1 text-gray-800 dark:text-gray-200\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('tasks.task',\"Ð—Ð°Ð´Ð°Ñ‡Ð°\"),\" \",index+1,\":\"]}),\" \",task.question]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:t('answer',\"ÐžÑ‚Ð²ÐµÑ‚\"),value:answers[\"\".concat(dayData.day,\"-\").concat(index)]||\"\",onChange:e=>handleAnswerChange(dayData.day,index,e.target.value),className:\"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-center\"}),hasAnswer&&(isAnswerCorrect?/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500 text-xl\",title:t('correct',\"ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾!\"),children:\"\\u2705\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 text-xl\",title:t('try_again',\"ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·\"),children:\"\\u274C\"}))]})]}),task.answerFormat&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:[\"\\uD83D\\uDCA1 \",t('answerFormat.hint',\"Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð°\"),\": \",task.answerFormat]}),hasAnswer&&!isAnswerCorrect&&task.explanation&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800 dark:text-blue-200\",children:[\"\\uD83D\\uDCA1 \",task.explanation]})})]},index);})}),dayData.theoryLink&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\",children:/*#__PURE__*/_jsxs(\"a\",{href:dayData.theoryLink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 dark:text-blue-400 hover:underline text-sm flex items-center\",children:[\"\\uD83D\\uDCD6 \",t('days.theory',\"Ð¢ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹\"),\" \\\"\",t(dayData.titleKey),\"\\\"\"]})})]},dayData.day);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 text-center text-gray-500 dark:text-gray-400 text-sm\",children:[/*#__PURE__*/_jsx(\"p\",{children:t('footer.course_description',\"ÐšÑƒÑ€Ñ Ð´Ð»Ñ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ Ð·Ð½Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐµ Ð·Ð° 6 ÐºÐ»Ð°ÑÑ\")}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 2025 Math Academy | \",t('footer.generated',\"Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾\")]})]})]}):/*#__PURE__*/// ðŸŸ¢ Ð­ÐšÐ ÐÐ ÐŸÐ Ð˜Ð’Ð•Ð¢Ð¡Ð¢Ð’Ð˜Ð¯ Ð”Ð›Ð¯ ÐÐ•ÐÐ’Ð¢ÐžÐ Ð˜Ð—ÐžÐ’ÐÐÐÐ«Ð¥ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð•Ð™\n_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-6xl\",children:\"\\uD83D\\uDCDA\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6\",children:t('auth.welcome',\"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Math Academy!\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto leading-relaxed\",children:t('auth.prompt',\"Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð¸Ð»Ð¸ Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 justify-center mb-12\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLoginClick,className:\"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium text-lg transition-colors shadow-lg\",children:t('header.login',\"Ð’Ð¾Ð¹Ñ‚Ð¸\")}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegisterClick,className:\"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-medium text-lg transition-colors shadow-lg\",children:t('header.register',\"Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 dark:border-gray-700 pt-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-500 dark:text-gray-400 italic\",children:t('slogan',\"ÐžÑ‚ Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¾ÑÐ½Ð¾Ð² Ðº Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ ÑÐºÐ¾ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ! ðŸš€\")})})]})}),showResetConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 m-4 max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white mb-2\",children:[\"\\uD83D\\uDD04 \",t('reset.new_tasks',\"ÐÐ¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ\")]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-4\",children:t('reset.confirmation',\"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ? Ð’ÐµÑÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð±ÑƒÐ´ÐµÑ‚ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½.\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowResetConfirm(false),className:\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700\",children:t('reset.cancel',\"ÐžÑ‚Ð¼ÐµÐ½Ð°\")}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{resetProgress();setShowResetConfirm(false);},className:\"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\",children:t('reset.generate',\"Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ\")})]})]})}),showScrollTop&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.scrollTo({top:0,behavior:'smooth'}),className:\"fixed bottom-6 right-6 z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-full w-10 h-10 flex items-center justify-center shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100\",\"aria-label\":\"\\u041D\\u0430\\u0432\\u0435\\u0440\\u0445\",children:\"\\u2191\"})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Header","Login","Register","authAPI","courseAPI","userAPI","courseStructure","taskGenerators","useTranslation","DayNavigation","jsx","_jsx","jsxs","_jsxs","detectCacheClear","sessionStorage","getItem","applyTranslationsToTasks","tasks","t","Array","isArray","map","task","_objectSpread","question","translationKey","translationParams","explanation","explanationKey","explanationParams","answerFormat","formatKey","isCorrectAnswerCheck","day","index","correctAnswer","currentAnswers","_currentAnswers","userAnswer","concat","toString","trim","toLowerCase","correct","includes","userNum","replace","correctNum","userA","userB","split","correctA","correctB","App","i18n","tests","setTests","answers","setAnswers","loading","setLoading","showResetConfirm","setShowResetConfirm","user","setUser","showLogin","setShowLogin","showRegister","setShowRegister","currentDay","setCurrentDay","showScrollTop","setShowScrollTop","authError","setAuthError","dataLoaded","setDataLoaded","recoveryAttempted","setRecoveryAttempted","handleScroll","window","scrollY","addEventListener","removeEventListener","checkAuth","token","localStorage","name","isLoggedIn","response","getMe","userData","data","setItem","JSON","stringify","error","console","log","savedUser","parse","tempUser","id","Date","now","email","loadUserData","savedTests","savedAnswers","finalTests","finalAnswers","parsedTests","parsedAnswers","dayData","parseError","Error","titleKey","theoryLink","generator","taskCount","filter","length","setTimeout","serverAnswers","getAnswers","catch","Object","keys","syncError","emergencyTests","updatedTests","language","recoverFromDatabase","hasAuthToken","hasLocalTests","hasLocalAnswers","wasCacheCleared","removeItem","tasksResponse","getAllTasks","dbTasks","answersResponse","dbAnswers","restoredTests","dayStr","parseInt","dayTasks","dayInfo","find","d","answer","task_data","compatibleAnswers","forEach","key","Number","_error$response","interval","setInterval","clearInterval","manualRecovery","handleLogin","formData","_response$data","login","password","access_token","_error$response2","_error$response2$data","errorMessage","detail","message","handleRegister","_loginResponse$data","register","username","grade","loginResponse","_error$response3","_error$response3$data","handleLogout","handleAnswerChange","value","answerKey","newAnswers","isCorrectAnswer","saveAnswer","completedTasks","i","updateProgress","getDayProgress","correctCount","Math","round","getTotalProgress","totalCorrect","totalTasks","resetProgress","userTests","saveTasks","handleLoginClick","handleRegisterClick","handleDayClick","dayNumber","element","document","getElementById","headerOffset","elementPosition","offsetTop","offsetPosition","scrollTo","top","max","behavior","className","children","progress","onResetClick","onSettingsClick","onLoginClick","onLogoutClick","process","env","NODE_ENV","onClick","title","onLogin","onSwitchToRegister","onRegister","onSwitchToLogin","days","onDayClick","_dayData$tasks","_dayData$tasks2","dayProgress","style","width","isAnswerCorrect","hasAnswer","type","placeholder","onChange","e","target","href","rel"],"sources":["/opt/math-app/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport Header from \"./components/Header\";\nimport Login from \"./components/auth/Login\";\nimport Register from \"./components/auth/Register\";\nimport { authAPI, courseAPI, userAPI } from './services/api';\nimport { courseStructure } from './taskGenerators';\nimport * as taskGenerators from './taskGenerators';\nimport { useTranslation } from 'react-i18next';\nimport DayNavigation from './components/DayNavigation';\n\n// ðŸŸ¢ ÐŸÐ ÐžÐ¡Ð¢ÐžÐ™ Ð˜ ÐÐÐ”Ð•Ð–ÐÐ«Ð™ Ð”Ð•Ð¢Ð•ÐšÐ¢ÐžÐ  Ð¡Ð‘Ð ÐžÐ¡Ð ÐšÐ­Ð¨Ð\nconst detectCacheClear = () => {\n  // ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð² sessionStorage\n  return sessionStorage.getItem('cacheWasCleared') === 'true';\n};\n\n// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¾Ð² Ðº Ð·Ð°Ð´Ð°Ð½Ð¸ÑÐ¼\nconst applyTranslationsToTasks = (tasks, t) => {\n  if (!tasks || !Array.isArray(tasks)) return [];\n  \n  return tasks.map(task => ({\n    ...task,\n    question: task.translationKey ? t(task.translationKey, task.translationParams) : task.question,\n    explanation: task.explanationKey ? t(task.explanationKey, task.explanationParams) : task.explanation,\n    answerFormat: task.formatKey ? t(task.formatKey) : task.answerFormat\n  }));\n};\n\n// ðŸŸ¢ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜ ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐžÐ¡Ð¢Ð˜ ÐžÐ¢Ð’Ð•Ð¢Ð\nconst isCorrectAnswerCheck = (day, index, correctAnswer, currentAnswers) => {\n  if (!currentAnswers) return false;\n  \n  const userAnswer = currentAnswers[`${day}-${index}`]?.toString().trim().toLowerCase();\n  const correct = correctAnswer?.toString().toLowerCase();\n  \n  if (!userAnswer || !correct) return false;\n  \n  if (correct.includes('%')) {\n    const userNum = userAnswer.replace('%', '');\n    const correctNum = correct.replace('%', '');\n    return userNum === correctNum;\n  }\n\n  if (correct.includes('/')) {\n    const [userA, userB] = userAnswer.split('/');\n    const [correctA, correctB] = correct.split('/');\n    return userA === correctA && userB === correctB;\n  }\n\n  return userAnswer === correct;\n};\n\nfunction App() {\n  const { t, i18n } = useTranslation();\n  const [tests, setTests] = useState([]);\n  const [answers, setAnswers] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [showResetConfirm, setShowResetConfirm] = useState(false);\n  const [user, setUser] = useState(null);\n  const [showLogin, setShowLogin] = useState(false);\n  const [showRegister, setShowRegister] = useState(false);\n  const [currentDay, setCurrentDay] = useState(1);\n  const [showScrollTop, setShowScrollTop] = useState(false);\n  const [authError, setAuthError] = useState('');\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [recoveryAttempted, setRecoveryAttempted] = useState(false);\n\n  // ðŸŸ¢ EFFECT Ð”Ð›Ð¯ ÐžÐ¢Ð¡Ð›Ð•Ð–Ð˜Ð’ÐÐÐ˜Ð¯ Ð¡ÐšÐ ÐžÐ›Ð›Ð\n  useEffect(() => {\n    const handleScroll = () => {\n      setShowScrollTop(window.scrollY > 300);\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  // ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐÐ¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐÐ£Ð¢Ð•ÐÐ¢Ð˜Ð¤Ð˜ÐšÐÐ¦Ð˜Ð˜\n  const checkAuth = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      if (!token) {\n        setUser({ name: t('header.guest', \"Ð“Ð¾ÑÑ‚ÑŒ\"), isLoggedIn: false });\n        setLoading(false);\n        return;\n      }\n\n      // ÐŸÑ€Ð¾Ð±ÑƒÐµÐ¼ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n      try {\n        const response = await authAPI.getMe();\n        const userData = {\n          ...response.data,\n          isLoggedIn: true\n        };\n        setUser(userData);\n        localStorage.setItem('userData', JSON.stringify(userData));\n      } catch (error) {\n        console.log('getMe failed, checking localStorage for user data');\n        \n        // ÐŸÑ€Ð¾Ð±ÑƒÐµÐ¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· localStorage\n        const savedUser = localStorage.getItem('userData');\n        if (savedUser) {\n          const userData = JSON.parse(savedUser);\n          setUser({ ...userData, isLoggedIn: true });\n        } else {\n          // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n          const tempUser = {\n            id: Date.now(),\n            name: 'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ',\n            email: 'user@example.com',\n            isLoggedIn: true\n          };\n          setUser(tempUser);\n          localStorage.setItem('userData', JSON.stringify(tempUser));\n        }\n      }\n    } catch (error) {\n      console.error('Auth check error:', error);\n      setUser({ name: t('header.guest', \"Ð“Ð¾ÑÑ‚ÑŒ\"), isLoggedIn: false });\n    } finally {\n      setLoading(false);\n    }\n  }, [t]);\n\n  // ðŸŸ¢ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ ÐŸÐ Ð˜ Ð¡Ð¢ÐÐ Ð¢Ð•\n  useEffect(() => {\n    checkAuth();\n  }, [checkAuth]);\n\n  // ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐÐ¯ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ Ð”ÐÐÐÐ«Ð¥\n  const loadUserData = useCallback(async () => {\n    if (dataLoaded) return;\n    \n    try {\n      // 1. Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¸Ð· localStorage (Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾)\n      const savedTests = localStorage.getItem('userMathTests');\n      const savedAnswers = localStorage.getItem('userMathAnswers');\n\n      let finalTests = [];\n      let finalAnswers = {};\n\n      if (savedTests && savedAnswers) {\n        try {\n          const parsedTests = JSON.parse(savedTests);\n          const parsedAnswers = JSON.parse(savedAnswers);\n          \n          finalTests = parsedTests.map(dayData => ({\n            ...dayData,\n            tasks: applyTranslationsToTasks(dayData.tasks, t)\n          }));\n          finalAnswers = parsedAnswers;\n        } catch (parseError) {\n          console.error('Error parsing localStorage data:', parseError);\n          // Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n          throw new Error('Invalid localStorage data');\n        }\n      } else {\n        // 2. Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ\n        finalTests = courseStructure.map(day => ({\n          day: day.day,\n          titleKey: day.titleKey,\n          theoryLink: day.theoryLink,\n          tasks: taskGenerators[day.generator] ? taskGenerators[day.generator](day.taskCount, t) : []\n        })).filter(day => day.tasks.length > 0);\n        \n        finalAnswers = {};\n      }\n\n      // 3. Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n      setTests(finalTests);\n      setAnswers(finalAnswers);\n      \n      // 4. Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage\n      localStorage.setItem('userMathTests', JSON.stringify(finalTests));\n      localStorage.setItem('userMathAnswers', JSON.stringify(finalAnswers));\n      \n      setDataLoaded(true);\n\n      // 5. Ð¤ÐžÐÐ¾Ð²Ð°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹\n      if (user && user.isLoggedIn) {\n        setTimeout(async () => {\n          try {\n            console.log('ðŸ”„ Starting background sync with server...');\n            \n            // Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”\n            const serverAnswers = await userAPI.getAnswers().catch(() => ({ data: {} }));\n            \n            // Ð•ÑÐ»Ð¸ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ ÐµÑÑ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ…\n            if (serverAnswers.data && Object.keys(serverAnswers.data).length > 0) {\n              console.log('âœ… Answers loaded from DB:', Object.keys(serverAnswers.data).length);\n              setAnswers(serverAnswers.data);\n              localStorage.setItem('userMathAnswers', JSON.stringify(serverAnswers.data));\n            }\n\n            // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€\n            console.log('â„¹ï¸ Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾');\n            \n            console.log('âœ… Background sync completed');\n          } catch (syncError) {\n            console.log('Background sync failed, continuing with local data');\n          }\n        }, 2000);\n      }\n\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      \n      // ÐÐ’ÐÐ Ð˜Ð™ÐÐ«Ð™ Ð Ð•Ð–Ð˜Ðœ: Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ\n      const emergencyTests = courseStructure.map(day => ({\n        day: day.day,\n        titleKey: day.titleKey,\n        theoryLink: day.theoryLink,\n        tasks: taskGenerators[day.generator] ? taskGenerators[day.generator](day.taskCount, t) : []\n      })).filter(day => day.tasks.length > 0);\n      \n      setTests(emergencyTests);\n      setAnswers({});\n      localStorage.setItem('userMathTests', JSON.stringify(emergencyTests));\n      localStorage.setItem('userMathAnswers', JSON.stringify({}));\n      \n      setDataLoaded(true);\n    }\n  }, [user, t, dataLoaded]);\n\n  // ðŸŸ¢ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ Ð”ÐÐÐÐ«Ð¥ ÐŸÐ Ð˜ Ð˜Ð—ÐœÐ•ÐÐ•ÐÐ˜Ð˜ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯ Ð˜Ð›Ð˜ Ð¯Ð—Ð«ÐšÐ\n  useEffect(() => {\n    if (!loading && user !== null) {\n      loadUserData();\n    }\n  }, [user, loading, loadUserData]);\n\n  useEffect(() => {\n    if (dataLoaded && tests.length > 0) {\n      // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹ Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ ÑÐ·Ñ‹ÐºÐ°\n      const updatedTests = tests.map(dayData => ({\n        ...dayData,\n        tasks: applyTranslationsToTasks(dayData.tasks, t)\n      }));\n      setTests(updatedTests);\n    }\n  }, [i18n.language, t]);\n\n  // ðŸŸ¢ Ð£Ð›Ð£Ð§Ð¨Ð•ÐÐÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯ Ð˜Ð— Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥\n  const recoverFromDatabase = async () => {\n    if (recoveryAttempted) return; // ÐÐµ Ð¿Ñ‹Ñ‚Ð°Ñ‚ÑŒÑÑ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾\n    \n    const hasAuthToken = localStorage.getItem('authToken');\n    const hasLocalTests = localStorage.getItem('userMathTests');\n    const hasLocalAnswers = localStorage.getItem('userMathAnswers');\n    \n    console.log('ðŸ” Ð¡Ð¢ÐÐ¢Ð£Ð¡ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯:', {\n      hasAuthToken: !!hasAuthToken,\n      hasLocalTests: !!hasLocalTests, \n      hasLocalAnswers: !!hasLocalAnswers,\n      recoveryAttempted\n    });\n\n    // ðŸŸ¢ Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð•: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ð±Ñ‹Ð» Ð»Ð¸ ÑÐ±Ñ€Ð¾Ñ ÐºÑÑˆÐ°\n    const wasCacheCleared = detectCacheClear();\n    \n    // ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð™ Ð¡Ð›Ð£Ð§ÐÐ™: Ð•ÑÑ‚ÑŒ Ñ‚Ð¾ÐºÐµÐ½, Ð½Ð¾ Ð±Ñ‹Ð» ÑÐ±Ñ€Ð¾Ñ ÐºÑÑˆÐ° Ð˜Ð›Ð˜ Ð½ÐµÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…\n    if (hasAuthToken && (wasCacheCleared || !hasLocalTests || !hasLocalAnswers)) {\n      console.log('ðŸš¨ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð˜Ð— Ð‘Ð”: Ð¢Ð¾ÐºÐµÐ½ ÐµÑÑ‚ÑŒ + ÑÐ±Ñ€Ð¾Ñ ÐºÑÑˆÐ°!');\n      setRecoveryAttempted(true);\n      \n      // Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ ÑÐ±Ñ€Ð¾ÑÐ° ÐºÑÑˆÐ°\n      if (wasCacheCleared) {\n        sessionStorage.removeItem('cacheWasCleared');\n      }\n      \n      try {\n        // 1. Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð’Ð¡Ð• ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”\n        console.log('ðŸ“š Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”...');\n        const tasksResponse = await userAPI.getAllTasks();\n        const dbTasks = tasksResponse.data || {};\n        \n        console.log('âœ… Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”:', Object.keys(dbTasks).length, 'Ð´Ð½ÐµÐ¹');\n        \n        // 2. Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð’Ð¡Ð• Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”\n        console.log('ðŸ“¥ Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”...');\n        const answersResponse = await userAPI.getAnswers();\n        const dbAnswers = answersResponse.data || {};\n        \n        console.log('âœ… ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð· Ð‘Ð”:', Object.keys(dbAnswers).length, 'Ð·Ð°Ð¿Ð¸ÑÐµÐ¹');\n\n        // 3. Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¸Ñ…\n        let restoredTests = [];\n        \n        if (Object.keys(dbTasks).length > 0) {\n          console.log('ðŸŽ¯ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐÐ’Ð›Ð˜Ð’ÐÐ•Ðœ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð”');\n          \n          // ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð¸Ð· Ð‘Ð” Ð² ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ\n          restoredTests = Object.keys(dbTasks).map(dayStr => {\n            const day = parseInt(dayStr);\n            const dayTasks = dbTasks[dayStr];\n            \n            // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð´Ð½Ðµ Ð¸Ð· courseStructure\n            const dayInfo = courseStructure.find(d => d.day === day) || {\n              titleKey: `days.day${day}`,\n              theoryLink: null\n            };\n            \n            return {\n              day: day,\n              titleKey: dayInfo.titleKey,\n              theoryLink: dayInfo.theoryLink,\n              tasks: dayTasks.map(task => ({\n                question: task.question,\n                answer: task.answer,\n                explanation: task.explanation,\n                answerFormat: task.answerFormat,\n                // Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ translation Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· task_data\n                ...(task.task_data && typeof task.task_data === 'object' ? task.task_data : {})\n              }))\n            };\n          }).filter(day => day.tasks.length > 0);\n          \n          console.log(`âœ… Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ ${restoredTests.length} Ð´Ð½ÐµÐ¹ Ñ Ð·Ð°Ð´Ð°Ð½Ð¸ÑÐ¼Ð¸ Ð¸Ð· Ð‘Ð”`);\n          \n        } else {\n          // 4. Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ\n          console.log('ðŸ†• Ð¡ÐžÐ¥Ð ÐÐÐ•ÐÐÐ«Ð¥ Ð—ÐÐ”ÐÐÐ˜Ð™ ÐÐ•Ð¢ - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ðµ');\n          restoredTests = courseStructure.map(day => ({\n            day: day.day,\n            titleKey: day.titleKey,\n            theoryLink: day.theoryLink,\n            tasks: taskGenerators[day.generator] ? taskGenerators[day.generator](day.taskCount, t) : []\n          })).filter(day => day.tasks.length > 0);\n          \n          console.log(`âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾ ${restoredTests.length} Ð´Ð½ÐµÐ¹ Ñ Ð½Ð¾Ð²Ñ‹Ð¼Ð¸ Ð·Ð°Ð´Ð°Ð½Ð¸ÑÐ¼Ð¸`);\n        }\n\n        // 5. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð½ÐµÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ (Ñ‚Ðµ, Ð´Ð»Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð½ÐµÑ‚ Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹)\n        const compatibleAnswers = {};\n        Object.keys(dbAnswers).forEach(key => {\n          const [day, index] = key.split('-').map(Number);\n          const dayData = restoredTests.find(d => d.day === day);\n          \n          if (dayData && dayData.tasks && dayData.tasks[index]) {\n            compatibleAnswers[key] = dbAnswers[key];\n          } else {\n            console.log(`ðŸ—‘ï¸ Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ð½ÐµÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: ${key}`);\n          }\n        });\n        \n        console.log(`âœ… Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²: ${Object.keys(compatibleAnswers).length}`);\n\n        // 6. Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        setTests(restoredTests);\n        setAnswers(compatibleAnswers);\n        \n        localStorage.setItem('userMathTests', JSON.stringify(restoredTests));\n        localStorage.setItem('userMathAnswers', JSON.stringify(compatibleAnswers));\n        \n        console.log('ðŸŽ‰ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð˜Ð— Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥ Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐž!');\n\n      } catch (error) {\n        console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸Ð· Ð‘Ð”:', error);\n        console.log('ðŸ” Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸:', error.response?.data);\n        \n        // ÐÐ’ÐÐ Ð˜Ð™ÐÐ«Ð™ Ð Ð•Ð–Ð˜Ðœ: ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ\n        console.log('ðŸ†˜ Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð°Ð²Ð°Ñ€Ð¸Ð¹Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ...');\n        const emergencyTests = courseStructure.map(day => ({\n          day: day.day,\n          titleKey: day.titleKey,\n          theoryLink: day.theoryLink,\n          tasks: taskGenerators[day.generator] ? taskGenerators[day.generator](day.taskCount, t) : []\n        })).filter(day => day.tasks.length > 0);\n        \n        setTests(emergencyTests);\n        setAnswers({});\n        localStorage.setItem('userMathTests', JSON.stringify(emergencyTests));\n        localStorage.setItem('userMathAnswers', JSON.stringify({}));\n      }\n    }\n  };\n\n  // ðŸŸ¢ Ð¤Ð˜ÐÐÐ›Ð¬ÐÐžÐ• Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð˜Ð— Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥ ÐŸÐžÐ¡Ð›Ð• Ð¡Ð‘Ð ÐžÐ¡Ð ÐšÐ­Ð¨Ð\n  useEffect(() => {\n    // Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ€Ð°Ð·Ñƒ Ð¸ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 3 ÑÐµÐºÑƒÐ½Ð´Ñ‹ (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº)\n    recoverFromDatabase();\n    const interval = setInterval(() => {\n      if (!recoveryAttempted) {\n        recoverFromDatabase();\n      }\n    }, 3000);\n    \n    return () => clearInterval(interval);\n  }, [t, recoveryAttempted]);\n\n  // ðŸŸ¢ Ð”ÐžÐ‘ÐÐ’Ð˜Ðœ ÐšÐÐžÐŸÐšÐ£ Ð”Ð›Ð¯ Ð Ð£Ð§ÐÐžÐ“Ðž Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯ (Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)\n  const manualRecovery = () => {\n    console.log('ðŸ”„ Ð Ð£Ð§ÐÐžÐ™ Ð—ÐÐŸÐ£Ð¡Ðš Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯');\n    sessionStorage.setItem('cacheWasCleared', 'true');\n    setRecoveryAttempted(false);\n    recoverFromDatabase();\n  };\n\n  // ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐ«Ð™ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜Ðš Ð’Ð¥ÐžÐ”Ð\n  const handleLogin = async (formData) => {\n    setAuthError('');\n    \n    try {\n      console.log('ðŸ” Attempting login...');\n      const response = await authAPI.login({ \n        email: formData.email, \n        password: formData.password \n      });\n      \n      if (!response.data?.access_token) {\n        throw new Error('No access token received');\n      }\n      \n      localStorage.setItem('authToken', response.data.access_token);\n      console.log('âœ… Login successful, token saved');\n      \n      // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ñ€Ð¼Ñƒ Ð²Ñ…Ð¾Ð´Ð°\n      setShowLogin(false);\n      \n      // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ\n      await checkAuth();\n      \n    } catch (error) {\n      console.error('âŒ Login error:', error);\n      const errorMessage = error.response?.data?.detail || error.message || 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°';\n      setAuthError(errorMessage);\n      \n      // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð½ÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½\n      localStorage.removeItem('authToken');\n    }\n  };\n\n  // ðŸŸ¢ ÐÐÐ”Ð•Ð–ÐÐ«Ð™ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜Ðš Ð Ð•Ð“Ð˜Ð¡Ð¢Ð ÐÐ¦Ð˜Ð˜\n  const handleRegister = async (formData) => {\n    setAuthError('');\n    \n    try {\n      console.log('ðŸ“ Attempting registration...');\n      \n      await authAPI.register({ \n        email: formData.email,\n        username: formData.username, \n        password: formData.password,\n        grade: formData.grade\n      });\n      \n      console.log('âœ… Registration successful, attempting login...');\n      \n      const loginResponse = await authAPI.login({\n        email: formData.email,\n        password: formData.password\n      });\n      \n      if (!loginResponse.data?.access_token) {\n        throw new Error('No access token received after registration');\n      }\n      \n      localStorage.setItem('authToken', loginResponse.data.access_token);\n      console.log('âœ… Auto-login successful');\n      \n      // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ„Ð¾Ñ€Ð¼Ñƒ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸\n      setShowRegister(false);\n      \n      // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ\n      await checkAuth();\n      \n    } catch (error) {\n      console.error('âŒ Registration error:', error);\n      const errorMessage = error.response?.data?.detail || error.message || 'ÐžÑˆÐ¸Ð±ÐºÐ° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸';\n      setAuthError(errorMessage);\n      \n      // ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð½ÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½\n      localStorage.removeItem('authToken');\n    }\n  };\n\n  // ðŸŸ¢ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜Ðš Ð’Ð«Ð¥ÐžÐ”Ð\n  const handleLogout = () => {\n    console.log('ðŸšª Logging out...');\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userData');\n    setUser({ name: t('header.guest', \"Ð“Ð¾ÑÑ‚ÑŒ\"), isLoggedIn: false });\n    setAuthError('');\n    // ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ð¾ÑÑ‚Ð°ÐµÑ‚ÑÑ Ð² localStorage Ð´Ð»Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ\n  };\n\n  // ðŸŸ¢ ÐžÐŸÐ¢Ð˜ÐœÐ˜Ð—Ð˜Ð ÐžÐ’ÐÐÐÐÐ¯ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢ÐšÐ Ð’Ð’ÐžÐ”Ð ÐžÐ¢Ð’Ð•Ð¢Ð\n  const handleAnswerChange = async (day, index, value) => {\n    const answerKey = `${day}-${index}`;\n    const newAnswers = {\n      ...answers,\n      [answerKey]: value\n    };\n    \n    // ÐÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ UI\n    setAnswers(newAnswers);\n    localStorage.setItem('userMathAnswers', JSON.stringify(newAnswers));\n    \n    // Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼\n    if (user && user.isLoggedIn) {\n      setTimeout(async () => {\n        try {\n          const dayData = tests.find(d => d.day === day);\n          if (dayData && dayData.tasks[index]) {\n            const task = dayData.tasks[index];\n            const isCorrectAnswer = isCorrectAnswerCheck(day, index, task.answer, newAnswers);\n            \n            await userAPI.saveAnswer(day, index, value, isCorrectAnswer);\n            \n            const completedTasks = dayData.tasks.filter((t, i) => \n              isCorrectAnswerCheck(day, i, t.answer, newAnswers)\n            ).length;\n            \n            await courseAPI.updateProgress(day, newAnswers, completedTasks);\n          }\n        } catch (error) {\n          console.log('Background answer sync failed');\n        }\n      }, 500);\n    }\n  };\n\n  // ðŸŸ¢ Ð’Ð«Ð§Ð˜Ð¡Ð›Ð•ÐÐ˜Ð• ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡Ð\n  const getDayProgress = (day, tasks) => {\n    if (!tasks || !Array.isArray(tasks)) return 0;\n    \n    const correctCount = tasks.filter((task, index) =>\n      isCorrectAnswerCheck(day, index, task.answer, answers)\n    ).length;\n    \n    return tasks.length > 0 ? Math.round((correctCount / tasks.length) * 100) : 0;\n  };\n\n  const getTotalProgress = () => {\n    let totalCorrect = 0;\n    let totalTasks = 0;\n\n    tests.forEach(dayData => {\n      if (dayData.tasks && Array.isArray(dayData.tasks)) {\n        dayData.tasks.forEach((task, index) => {\n          totalTasks++;\n          if (isCorrectAnswerCheck(dayData.day, index, task.answer, answers)) {\n            totalCorrect++;\n          }\n        });\n      }\n    });\n\n    return totalTasks > 0 ? Math.round((totalCorrect / totalTasks) * 100) : 0;\n  };\n\n  // ðŸŸ¢ Ð¡Ð‘Ð ÐžÐ¡ ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡Ð\n  const resetProgress = async () => {\n    try {\n      const userTests = courseStructure.map(day => ({\n        day: day.day,\n        titleKey: day.titleKey,\n        theoryLink: day.theoryLink,\n        tasks: taskGenerators[day.generator] ? taskGenerators[day.generator](day.taskCount, t) : []\n      })).filter(day => day.tasks.length > 0);\n      \n      setTests(userTests);\n      setAnswers({});\n      \n      localStorage.setItem('userMathTests', JSON.stringify(userTests));\n      localStorage.setItem('userMathAnswers', JSON.stringify({}));\n      \n      // Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼\n      if (user && user.isLoggedIn) {\n        setTimeout(async () => {\n          try {\n            await courseAPI.resetProgress();\n            for (const dayData of userTests) {\n              await userAPI.saveTasks(dayData.day, dayData.tasks);\n            }\n          } catch (error) {\n            console.log('Background reset sync failed');\n          }\n        }, 500);\n      }\n      \n    } catch (error) {\n      console.error('Error resetting progress:', error);\n    }\n  };\n\n  // ðŸŸ¢ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢Ð§Ð˜ÐšÐ˜ UI\n  const handleLoginClick = () => {\n    setShowLogin(true);\n    setAuthError('');\n  };\n\n  const handleRegisterClick = () => {\n    setShowRegister(true);\n    setAuthError('');\n  };\n\n  const handleDayClick = (dayNumber) => {\n    setCurrentDay(dayNumber);\n    const element = document.getElementById(`day-${dayNumber}`);\n    if (element) {\n      const headerOffset = 340;\n      const elementPosition = element.offsetTop;\n      const offsetPosition = elementPosition - headerOffset;\n\n      setTimeout(() => {\n        window.scrollTo({\n          top: Math.max(0, offsetPosition),\n          behavior: 'smooth'\n        });\n      }, 50);\n    }\n  };\n\n  // ðŸŸ¢ Ð—ÐÐ“Ð Ð£Ð—ÐžÐ§ÐÐ«Ð™ Ð­ÐšÐ ÐÐ\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">{t('loading', \"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...\")}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // ðŸŸ¢ ÐžÐ¡ÐÐžÐ’ÐÐžÐ™ RENDER\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200\">\n      <Header \n        user={user || { name: t('header.guest', \"Ð“Ð¾ÑÑ‚ÑŒ\"), isLoggedIn: false }}\n        progress={getTotalProgress()}\n        onResetClick={() => setShowResetConfirm(true)}\n        onSettingsClick={() => console.log(\"Settings clicked\")}\n        onLoginClick={handleLoginClick}\n        onLogoutClick={handleLogout}\n        grade=\"6\"\n      />\n\n      {/* ðŸŸ¢ ÐšÐÐžÐŸÐšÐ Ð”Ð›Ð¯ Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸) */}\n      {process.env.NODE_ENV === 'development' && user && user.isLoggedIn && (\n        <div className=\"fixed top-20 right-4 z-40\">\n          <button\n            onClick={manualRecovery}\n            className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium\"\n            title=\"Ð¢ÐµÑÑ‚ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸Ð· Ð‘Ð”\"\n          >\n            ðŸ”„ Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ\n          </button>\n        </div>\n      )}\n\n      {/* ÐœÐžÐ”ÐÐ›Ð¬ÐÐ«Ð• ÐžÐšÐÐ */}\n      {showLogin && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <Login \n            onLogin={handleLogin} \n            onSwitchToRegister={() => { \n              setShowLogin(false); \n              setShowRegister(true); \n              setAuthError('');\n            }}\n            error={authError}\n          />\n        </div>\n      )}\n\n      {showRegister && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <Register \n            onRegister={handleRegister} \n            onSwitchToLogin={() => { \n              setShowRegister(false); \n              setShowLogin(true); \n              setAuthError('');\n            }}\n            error={authError}\n          />\n        </div>\n      )}\n\n      {/* ÐÐÐ’Ð˜Ð“ÐÐ¦Ð˜Ð¯ ÐŸÐž Ð”ÐÐ¯Ðœ */}\n      {user && user.isLoggedIn && tests.length > 0 && (\n        <DayNavigation \n          days={tests.map(day => ({\n            ...day,\n            progress: getDayProgress(day.day, day.tasks)\n          }))}\n          currentDay={currentDay}\n          onDayClick={handleDayClick}\n        />\n      )}\n\n      {/* ÐžÐ¡ÐÐžÐ’ÐÐžÐ™ ÐšÐžÐÐ¢Ð•ÐÐ¢ */}\n      {user && user.isLoggedIn ? (\n        <div className=\"container mx-auto p-14 max-w-4xl\">\n          <div className=\"grid gap-16\">\n            {tests.map(dayData => {\n              const dayProgress = getDayProgress(dayData.day, dayData.tasks);\n              \n              return (\n                <div key={dayData.day} id={`day-${dayData.day}`} className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6\">\n                  <div className=\"flex justify-between items-start mb-4\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-1\">\n                        {t('days.day', \"Ð”ÐµÐ½ÑŒ\")} {dayData.day}\n                      </h2>\n                      <p className=\"text-lg text-gray-800 dark:text-gray-200 font-medium\">\n                        {t(dayData.titleKey)}\n                      </p>\n                    </div>\n                    \n                    <div className=\"flex flex-col items-end space-y-1 flex-shrink-0\">\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">\n                          {dayProgress}%\n                        </span>\n                        <div className=\"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\n                          <div \n                            className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${dayProgress}%` }}\n                          />\n                        </div>\n                      </div>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                        {dayData.tasks?.length || 0} {t('days.tasks', \"Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹\")}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    {dayData.tasks?.map((task, index) => {\n                      const isAnswerCorrect = isCorrectAnswerCheck(dayData.day, index, task.answer, answers);\n                      const hasAnswer = answers[`${dayData.day}-${index}`];\n                      \n                      return (\n                        <div key={index} className={`p-4 rounded-lg ${\n                          hasAnswer \n                            ? isAnswerCorrect \n                              ? 'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800'\n                              : 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800'\n                            : 'bg-gray-50 dark:bg-gray-700'\n                        }`}>\n                          <div className=\"flex items-center space-x-3\">\n                            <span className=\"flex-1 text-gray-800 dark:text-gray-200\">\n                              <strong>{t('tasks.task', \"Ð—Ð°Ð´Ð°Ñ‡Ð°\")} {index + 1}:</strong> {task.question}\n                            </span>\n\n                            <div className=\"flex items-center space-x-2\">\n                              <input\n                                type=\"text\"\n                                placeholder={t('answer', \"ÐžÑ‚Ð²ÐµÑ‚\")}\n                                value={answers[`${dayData.day}-${index}`] || \"\"}\n                                onChange={e => handleAnswerChange(dayData.day, index, e.target.value)}\n                                className=\"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-center\"\n                              />\n                              {hasAnswer && (\n                                isAnswerCorrect ? (\n                                  <span className=\"text-green-500 text-xl\" title={t('correct', \"ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾!\")}>âœ…</span>\n                                ) : (\n                                  <span className=\"text-red-500 text-xl\" title={t('try_again', \"ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·\")}>âŒ</span>\n                                )\n                              )}\n                            </div>\n                          </div>\n                          \n                          {task.answerFormat && (\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                              ðŸ’¡ {t('answerFormat.hint', \"Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð°\")}: {task.answerFormat}\n                            </div>\n                          )}\n                          \n                          {hasAnswer && !isAnswerCorrect && task.explanation && (\n                            <div className=\"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md\">\n                              <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                                ðŸ’¡ {task.explanation}\n                              </p>\n                            </div>\n                          )}\n                        </div>\n                      );\n                    })}\n                  </div>\n\n                  {dayData.theoryLink && (\n                    <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\n                      <a\n                        href={dayData.theoryLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm flex items-center\"\n                      >\n                        ðŸ“– {t('days.theory', \"Ð¢ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹\")} \"{t(dayData.titleKey)}\"\n                      </a>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"mt-8 text-center text-gray-500 dark:text-gray-400 text-sm\">\n            <p>{t('footer.course_description', \"ÐšÑƒÑ€Ñ Ð´Ð»Ñ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ Ð·Ð½Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐµ Ð·Ð° 6 ÐºÐ»Ð°ÑÑ\")}</p>\n            <p>Â© 2025 Math Academy | {t('footer.generated', \"Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾\")}</p>\n          </div>\n        </div>\n      ) : (\n        // ðŸŸ¢ Ð­ÐšÐ ÐÐ ÐŸÐ Ð˜Ð’Ð•Ð¢Ð¡Ð¢Ð’Ð˜Ð¯ Ð”Ð›Ð¯ ÐÐ•ÐÐ’Ð¢ÐžÐ Ð˜Ð—ÐžÐ’ÐÐÐÐ«Ð¥ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð•Ð™\n        <div className=\"min-h-screen flex items-center justify-center px-4\">\n          <div className=\"text-center max-w-2xl mx-auto\">\n            <div className=\"mb-8 flex justify-center\">\n              <div className=\"w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-6xl\">\n                ðŸ“š\n              </div>\n            </div>\n            \n            <h1 className=\"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6\">\n              {t('auth.welcome', \"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Math Academy!\")}\n            </h1>\n            \n            <p className=\"text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto leading-relaxed\">\n              {t('auth.prompt', \"Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð¸Ð»Ð¸ Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ\")}\n            </p>\n            \n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-12\">\n              <button\n                onClick={handleLoginClick}\n                className=\"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium text-lg transition-colors shadow-lg\"\n              >\n                {t('header.login', \"Ð’Ð¾Ð¹Ñ‚Ð¸\")}\n              </button>\n              <button\n                onClick={handleRegisterClick}\n                className=\"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-medium text-lg transition-colors shadow-lg\"\n              >\n                {t('header.register', \"Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ\")}\n              </button>\n            </div>\n            \n            <div className=\"border-t border-gray-200 dark:border-gray-700 pt-8\">\n              <p className=\"text-lg text-gray-500 dark:text-gray-400 italic\">\n                {t('slogan', \"ÐžÑ‚ Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¾ÑÐ½Ð¾Ð² Ðº Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ ÑÐºÐ¾ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ! ðŸš€\")}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ÐŸÐžÐ”Ð¢Ð’Ð•Ð Ð–Ð”Ð•ÐÐ˜Ð• Ð¡Ð‘Ð ÐžÐ¡Ð ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡Ð */}\n      {showResetConfirm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 m-4 max-w-md w-full\">\n            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-2\">\n              ðŸ”„ {t('reset.new_tasks', \"ÐÐ¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ\")}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n              {t('reset.confirmation', \"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ? Ð’ÐµÑÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð±ÑƒÐ´ÐµÑ‚ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½.\")}\n            </p>\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => setShowResetConfirm(false)}\n                className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700\"\n              >\n                {t('reset.cancel', \"ÐžÑ‚Ð¼ÐµÐ½Ð°\")}\n              </button>\n              <button\n                onClick={() => {\n                  resetProgress();\n                  setShowResetConfirm(false);\n                }}\n                className=\"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\"\n              >\n                {t('reset.generate', \"Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ\")}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ÐšÐÐžÐŸÐšÐ ÐÐÐ’Ð•Ð Ð¥ */}\n      {showScrollTop && (\n        <button \n          onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}\n          className=\"fixed bottom-6 right-6 z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-full w-10 h-10 flex items-center justify-center shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100\"\n          aria-label=\"ÐÐ°Ð²ÐµÑ€Ñ…\"\n        >\n          â†‘\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}